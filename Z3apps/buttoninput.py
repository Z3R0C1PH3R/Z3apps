# These mappings are for RG35XX+

mappings = {"03001100ffffffff":"DY 1",
            "0300110001000000":"DY -1",
            "0300110000000000":"DY 0",
            "03001000ffffffff":"DX -1",
            "0300100001000000":"DX 1",
            "0300100000000000":"DX 0",
            "0100300101000000":"A 1",
            "0100300100000000":"A 0",
            "0100310101000000":"B 1",
            "0100310100000000":"B 0",
            "0100320101000000":"Y 1",
            "0100320100000000":"Y 0",
            "0100330101000000":"X 1",
            "0100330100000000":"X 0",
            "0100340101000000":"L1 1",
            "0100340100000000":"L1 0",
            "01003a0101000000":"L2 1",
            "01003a0100000000":"L2 0",
            "0100350101000000":"R1 1",
            "0100350100000000":"R1 0",
            "01003b0101000000":"R2 1",
            "01003b0100000000":"R2 0",
            "0100370101000000":"START 1",
            "0100370100000000":"START 0",
            "0100360101000000":"SELECT 1",
            "0100360100000000":"SELECT 0",
            "0100730001000000":"V+ 1",
            "0100730000000000":"V+ 0",
            "0100720001000000":"V- 1",
            "0100720000000000":"V- 0",
            "0100380101000000":"MENU 1",
            "0100380100000000":"MENU 0",
            "0100620101000000":"MENUF 1",
            "0100620100000000":"MENUF 0"}

def take_input(a=open("/dev/input/event1", "rb")):
    """Returns the key pressed according to above table, Blocks until keypress"""
    r = "0000000000000000"
    while r == "0000000000000000":
        r = a.read(8).hex()
    return mappings.get(r, "UNKNOWN 0")


if __name__ == "__main__":
    import os
    while True:
        m = take_input()
        print(m)
        os.system(f'./display.sh "{m}"')

